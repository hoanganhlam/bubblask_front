(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{483:function(t,e,n){var r=n(12);r(r.P,"Array",{fill:n(484)}),n(103)("fill")},484:function(t,e,n){"use strict";var r=n(49),o=n(406),c=n(41);t.exports=function(t){for(var e=r(this),n=c(e.length),l=arguments.length,_=o(l>1?arguments[1]:void 0,n),h=l>2?arguments[2]:void 0,v=void 0===h?n:o(h,n);v>_;)e[_++]=t;return e}},487:function(t,e,n){},488:function(t,e,n){},497:function(t,e,n){"use strict";var r=n(487);n.n(r).a},498:function(t,e,n){"use strict";var r=n(488);n.n(r).a},499:function(t,e,n){"use strict";n.r(e);n(50),n(15),n(14),n(42);var r=n(97);var o=n(126);function c(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=n(6),_=(n(7),n(13),n(3)),h=(n(483),n(25),n(35),n(34),n(83)),v=n(84),d=["#ebedf0","#dae2ef","#c0ddf9","#73b3f3","#3886e1","#17459e"],f={months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],on:"on",less:"Less",more:"More"},m=function(){function t(e,n,r){Object(h.a)(this,t),this.endDate=this._parseDate(e),this.max=r||Math.ceil(Math.max.apply(Math,c(n.map((function(t){return t.count}))))/5*4),this.startDate=this._shiftDate(e,-365),this.values=n}return Object(v.a)(t,[{key:"getColorIndex",value:function(t){return null==t?0:t<=0?1:t>=this.max?5:Math.ceil(100*t/this.max*.03)+1}},{key:"getCountEmptyDaysAtStart",value:function(){return this.startDate.getDay()}},{key:"getCountEmptyDaysAtEnd",value:function(){return 6-this.endDate.getDay()}},{key:"getDaysCount",value:function(){return 366+this.getCountEmptyDaysAtStart()+this.getCountEmptyDaysAtEnd()}},{key:"_shiftDate",value:function(t,e){var n=new Date(t);return n.setDate(n.getDate()+e),n}},{key:"_parseDate",value:function(t){return t instanceof Date?t:new Date(t)}},{key:"_keyDayParser",value:function(t){var e=this._parseDate(t);return"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate())}},{key:"activities",get:function(){var t=this;return this.values.reduce((function(e,n){return e[t._keyDayParser(n.date)]={count:n.count,colorIndex:t.getColorIndex(n.count)},e}),{})}},{key:"weekCount",get:function(){return this.getDaysCount()/7}},{key:"calendar",get:function(){var t=this,e=this._shiftDate(this.startDate,-this.getCountEmptyDaysAtStart());return Array.from({length:this.weekCount},(function(){return Array.from({length:7},(function(){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=t.activities[t._keyDayParser(n)];return e.setDate(e.getDate()+1),{date:n,count:r?r.count:null,colorIndex:r?r.colorIndex:0}}))}))}},{key:"firstFullWeekOfMonths",get:function(){return this.calendar.reduce((function(t,e,n,r){if(n>0){var o=r[n-1][0].date,c=e[0].date;(o.getFullYear()<c.getFullYear()||o.getMonth()<c.getMonth())&&t.push({value:c.getMonth(),index:n})}return t}),[])}}]),t}(),E={directives:{},props:{endDate:{required:!0},max:{type:Number},rangeColor:{type:Array,default:function(){return d}},values:{required:!0,type:Array},locale:{type:Object},tooltip:{type:Boolean,default:!0},tooltipUnit:{type:String,default:"contributions"},vertical:{type:Boolean,default:!1},noDataText:{type:String,default:null}},data:function(){return{now:new Date,DAYS_IN_WEEK:7,DEFAULT_LOCALE:f,DEFAULT_RANGE_COLOR:d,DEFAULT_TOOLTIP_UNIT:"contributions"}},computed:{position:function(){return this.vertical?"vertical":"horizontal"},heatMap:function(){return new m(this.endDate,this.values,this.max)},width:function(){return{horizontal:this.LEFT_SECTION_WIDTH+this.SQUARE_SIZE*this.heatMap.weekCount+this.SQUARE_BORDER_SIZE,vertical:this.LEFT_SECTION_WIDTH+7*this.SQUARE_SIZE+this.RIGHT_SECTION_WIDTH}},height:function(){return{horizontal:this.TOP_SECTION_HEIGTH+7*this.SQUARE_SIZE+this.SQUARE_BORDER_SIZE+this.BOTTOM_SECTION_HEIGTH,vertical:this.TOP_SECTION_HEIGTH+this.SQUARE_SIZE*this.heatMap.weekCount+this.SQUARE_BORDER_SIZE}},viewBox:function(){return"0 0 ".concat(this.width[this.position]," ").concat(this.height[this.position])},daysLabelWrapperTransform:function(){return{horizontal:"translate(0, ".concat(this.TOP_SECTION_HEIGTH,")"),vertical:"translate(".concat(this.LEFT_SECTION_WIDTH,", 0)")}},monthsLabelWrapperTransform:function(){return{horizontal:"translate(".concat(this.LEFT_SECTION_WIDTH,", 0)"),vertical:"translate(0, ".concat(this.TOP_SECTION_HEIGTH,")")}},legendWrapperTransform:function(){return{horizontal:"translate(".concat(this.width[this.position]-this.SQUARE_SIZE*this.rangeColor.length-30,", ").concat(this.height[this.position]-this.BOTTOM_SECTION_HEIGTH,")"),vertical:"translate(".concat(this.LEFT_SECTION_WIDTH+7*this.SQUARE_SIZE,", ").concat(this.TOP_SECTION_HEIGTH,")")}},yearWrapperTransform:function(){return"translate(".concat(this.LEFT_SECTION_WIDTH,", ").concat(this.TOP_SECTION_HEIGTH,")")},SQUARE_BORDER_SIZE:function(){return 2},SQUARE_SIZE:function(){return 10+this.SQUARE_BORDER_SIZE},TOP_SECTION_HEIGTH:function(){return 15},RIGHT_SECTION_WIDTH:function(){return 3*this.SQUARE_SIZE},BOTTOM_SECTION_HEIGTH:function(){return 15},LEFT_SECTION_WIDTH:function(){return Math.ceil(25)},lo:function(){return this.locale?{months:this.locale.months||f.months,days:this.locale.days||f.days,on:this.locale.on||f.on,less:this.locale.less||f.less,more:this.locale.more||f.more}:f}},methods:{getWeekPosition:function(t){return this.vertical?"translate(0, ".concat(this.SQUARE_SIZE*this.heatMap.weekCount-(t+1)*this.SQUARE_SIZE,")"):"translate(".concat(t*this.SQUARE_SIZE,", 0)")},getDayPosition:function(t){return this.vertical?"translate(".concat(t*this.SQUARE_SIZE,", 0)"):"translate(0, ".concat(t*this.SQUARE_SIZE,")")},getMonthLabelPosition:function(t){var e={x:0,y:0};return e.x=this.vertical?3:this.SQUARE_SIZE*t.index,e.y=this.vertical?this.SQUARE_SIZE*this.heatMap.weekCount-this.SQUARE_SIZE*t.index-this.SQUARE_SIZE/4:this.SQUARE_SIZE-this.SQUARE_BORDER_SIZE,e}}},C=(n(497),n(498),n(5)),S=Object(C.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"vch__wrapper",attrs:{viewBox:t.viewBox}},[n("g",{staticClass:"vch__months__labels__wrapper",attrs:{transform:t.monthsLabelWrapperTransform[t.position]}},t._l(t.heatMap.firstFullWeekOfMonths,(function(e,r){return n("text",{staticClass:"vch__month__label",attrs:{x:t.getMonthLabelPosition(e).x,y:t.getMonthLabelPosition(e).y}},[t._v(t._s(t.lo.months[e.value])+"\n        ")])})),0),t._v(" "),n("g",{staticClass:"vch__days__labels__wrapper",attrs:{transform:t.daysLabelWrapperTransform[t.position]}},[n("text",{staticClass:"vch__day__label",attrs:{x:t.vertical?1*t.SQUARE_SIZE:0,y:t.vertical?t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE:20}},[t._v(t._s(t.lo.days[1])+"\n        ")]),t._v(" "),n("text",{staticClass:"vch__day__label",attrs:{x:t.vertical?3*t.SQUARE_SIZE:0,y:t.vertical?t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE:44}},[t._v(t._s(t.lo.days[3])+"\n        ")]),t._v(" "),n("text",{staticClass:"vch__day__label",attrs:{x:t.vertical?5*t.SQUARE_SIZE:0,y:t.vertical?t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE:69}},[t._v(t._s(t.lo.days[5])+"\n        ")])]),t._v(" "),n("g",{staticClass:"vch__legend__wrapper",attrs:{transform:t.legendWrapperTransform[t.position]}},[n("text",{attrs:{x:t.vertical?1.25*t.SQUARE_SIZE:-25,y:t.vertical?8:t.SQUARE_SIZE+1}},[t._v(t._s(t.lo.less))]),t._v(" "),t._l(t.rangeColor,(function(e,r){return n("rect",{key:r,style:{fill:e},attrs:{width:t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE,height:t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE,x:t.vertical?1.75*t.SQUARE_SIZE:t.SQUARE_SIZE*r,y:t.vertical?t.SQUARE_SIZE*(r+1):5}})})),t._v(" "),n("text",{attrs:{x:t.vertical?1.25*t.SQUARE_SIZE:t.SQUARE_SIZE*t.rangeColor.length+1,y:t.vertical?t.SQUARE_SIZE*(t.rangeColor.length+2)-t.SQUARE_BORDER_SIZE:t.SQUARE_SIZE+1}},[t._v("\n            "+t._s(t.lo.more)+"\n        ")])],2),t._v(" "),n("g",{staticClass:"vch__year__wrapper",attrs:{transform:t.yearWrapperTransform}},t._l(t.heatMap.calendar,(function(e,r){return n("g",{key:r,staticClass:"vch__month__wrapper",attrs:{transform:t.getWeekPosition(r)}},t._l(e,(function(e,r){return e.date<t.now?n("rect",{key:r,staticClass:"vch__day__square",style:{fill:t.rangeColor[e.colorIndex]},attrs:{transform:t.getDayPosition(r),width:t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE,height:t.SQUARE_SIZE-t.SQUARE_BORDER_SIZE},on:{click:function(n){return t.$emit("day-click",e)}}}):t._e()})),0)})),0)])}),[],!1,null,"5592a248",null).exports,y=n(102),I=n(47);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}Array.range=function(a,b,t){var e=[];for(e[0]=a,t=t||1;a+t<=b;)e[e.length]=a+=t;return e},Array.prototype.fill=function(t){for(var i=0;i<this.length;i++)this[i]=t;return this};var R={name:"index",components:{Avatar:y.a,CalendarHeatMap:S,"b-input":I.a},asyncData:function(t){return Object(_.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,r=t.params,e.next=3,n.$get("/auth/users/".concat(r.user,"/"));case 3:return e.t0=e.sent,e.abrupt("return",{user:e.t0});case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{profile:{links:{}},updating:!1,report:{total_task_done:0,total_task_delay:0,tracking:[],accurate_estimates:0},time_works:[]}},created:function(){this.user.profile&&(this.profile=this.user.profile,Boolean(this.profile.links)||(this.profile.links={}),Boolean(this.profile.extra)||(this.profile.extra={})),this.fetchReport()},methods:{handleUpdate:function(){!1===this.updating?this.updating=!0:this.save()},save:function(){var t=this;this.$axios.$put("/auth/users/".concat(this.user.username,"/"),function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.user,{profile:this.cleanData(this.profile)})).finally((function(){t.updating=!1}))},fetchReport:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/auth/users/".concat(t.user.id,"/reports/"));case 2:t.report=e.sent,t.report.tracking.forEach((function(t){t.total_time=t.data.map((function(t){return t.time_taken})).reduce((function(a,b){return a+b}),0)})),n=new Array(24).fill(0),t.report.tracking.forEach((function(t){t.data.forEach((function(t){var e=t.time_start,r=t.time_stop;if(e&&r){var o=new Date(e),c=new Date(r);Array.range(o.getHours(),c.getHours()).forEach((function(t){n[t]=n[t]+1}))}}))})),r=Math.max.apply(Math,c(n)),t.time_works=n.map((function(t){return t/r}));case 8:case"end":return e.stop()}}),e)})))()}},computed:{reportData:function(){var t=this.report.tracking.map((function(t){return t.total_time})).reduce((function(a,b){return a+b}),0);return{total_task_done:this.report.total_task_done,total_task_delay:this.report.total_task_delay,total_focus:(this.user.profile.extra&&this.user.profile.extra.temp_score?this.user.profile.extra.temp_score:0)/3600,avg_focus:this.report.tracking.length?(t||0)/this.report.tracking.length/60:0,accurate_estimates:this.report.accurate_estimates/60,rank:0}},chartValues:function(){return this.report.tracking.map((function(t){return{date:new Date(t.date_record),count:t.total_time}}))},timeChart:function(){return this.report.tracking.length,[]}}},D=Object(C.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"hero is-light is-small"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("div",{staticClass:"media"},[n("div",{staticClass:"media-left",staticStyle:{"margin-right":"2rem"}},[n("avatar",{staticClass:"is-96x96",attrs:{"can-update":t.updating},model:{value:t.profile.media,callback:function(e){t.$set(t.profile,"media",e)},expression:"profile.media"}})],1),t._v(" "),n("div",{staticClass:"media-content"},[t.updating?n("div",{staticClass:"columns is-grapless",staticStyle:{"margin-bottom":"0"}},[n("div",{staticClass:"column"},[n("ce",{staticClass:"title",attrs:{elm:"h1",editable:!0,placeholder:"First name"},model:{value:t.user.first_name,callback:function(e){t.$set(t.user,"first_name",e)},expression:"user.first_name"}})],1),t._v(" "),n("div",{staticClass:"column"},[n("ce",{staticClass:"title",attrs:{elm:"h1",editable:!0,placeholder:"Last name"},model:{value:t.user.last_name,callback:function(e){t.$set(t.user,"last_name",e)},expression:"user.last_name"}})],1)]):n("h1",{staticClass:"title"},[t._v(t._s(t.convertName(t.user)))]),t._v(" "),n("ce",{staticClass:"subtitle",attrs:{elm:"div",editable:t.updating,placeholder:"Bio"},model:{value:t.profile.bio,callback:function(e){t.$set(t.profile,"bio",e)},expression:"profile.bio"}}),t._v(" "),n("div",{staticClass:"buttons"},t._l(Object.keys(t.profile.links),(function(e){return t.profile.links[e]?n("a",{key:e,staticClass:"button is-small",attrs:{href:t.profile.links[e],target:"_blank"}},[n("x-icon",{attrs:{name:e}})],1):t._e()})),0)],1),t._v(" "),t.currentUser&&t.currentUser.id===t.user.id?n("div",{staticClass:"media-right"},[n("div",{staticClass:"button is-text",on:{click:t.handleUpdate}},[n("x-icon",{attrs:{name:"pen"}})],1)]):t._e()])])])]),t._v(" "),n("div",{staticClass:"section"},[n("div",{staticClass:"container"},[t.updating?n("div",[n("h4",{staticClass:"widget_title"},[t._v("Links")]),t._v(" "),n("div",{staticClass:"columns is-gapless is-mobile"},[t._m(6),t._v(" "),n("div",{staticClass:"column is-9"},[n("b-input",{attrs:{placeholder:"https://bubblask.com",expanded:""},model:{value:t.profile.links.ws,callback:function(e){t.$set(t.profile.links,"ws",e)},expression:"profile.links.ws"}})],1)]),t._v(" "),n("div",{staticClass:"columns is-gapless is-mobile"},[t._m(7),t._v(" "),n("div",{staticClass:"column is-9"},[n("b-input",{attrs:{placeholder:"https://facebook.com/bubblask",expanded:""},model:{value:t.profile.links.fb,callback:function(e){t.$set(t.profile.links,"fb",e)},expression:"profile.links.fb"}})],1)]),t._v(" "),n("div",{staticClass:"columns is-gapless is-mobile"},[t._m(8),t._v(" "),n("div",{staticClass:"column is-9"},[n("b-input",{attrs:{placeholder:"https://twitter.com@/bubblask",expanded:""},model:{value:t.profile.links.tw,callback:function(e){t.$set(t.profile.links,"tw",e)},expression:"profile.links.tw"}})],1)]),t._v(" "),n("div",{staticClass:"columns is-gapless is-mobile"},[t._m(9),t._v(" "),n("div",{staticClass:"column is-9"},[n("b-input",{attrs:{placeholder:"https://linkedin.com/bubblask",expanded:""},model:{value:t.profile.links.li,callback:function(e){t.$set(t.profile.links,"li",e)},expression:"profile.links.li"}})],1)])]):n("div",{staticClass:"columns is-multiline"},[n("div",{staticClass:"column is-12"},[n("calendar-heat-map",{attrs:{values:t.chartValues,"end-date":new Date}})],1),t._v(" "),n("div",{staticClass:"column is-6"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[t._m(0),t._v(" "),n("div",{staticClass:"media-right"},[n("span",{staticClass:"title is-1"},[t._v(t._s(t.reportData.total_focus.toFixed(1)))]),t._v(" "),n("span",[t._v("h")])])])])])]),t._v(" "),n("div",{staticClass:"column is-6"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[t._m(1),t._v(" "),n("div",{staticClass:"media-right"},[n("span",{staticClass:"title is-1"},[t._v(t._s(100-t.reportData.accurate_estimates.toFixed(1)))]),t._v(" "),n("span",[t._v("%")])])])])])]),t._v(" "),n("div",{staticClass:"column is-6"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[t._m(2),t._v(" "),n("div",{staticClass:"media-right"},[n("span",{staticClass:"title is-1"},[t._v(t._s(t.reportData.avg_focus.toFixed(1)))]),t._v(" "),n("span",[t._v("m/day")])])])])])]),t._v(" "),n("div",{staticClass:"column is-6"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[t._m(3),t._v(" "),n("div",{staticClass:"media-right"},[n("span",{staticClass:"title is-1"},[t._v(t._s(t.reportData.total_task_done))]),t._v(" "),n("span",[t._v("tasks")])])])])])]),t._v(" "),n("div",{staticClass:"column is-6"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[t._m(4),t._v(" "),n("div",{staticClass:"media-right"},[n("span",{staticClass:"title is-1"},[t._v(t._s(t.reportData.total_task_delay))]),t._v(" "),n("span",[t._v("tasks")])])])])])]),t._v(" "),n("div",{staticClass:"column is-6"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[t._m(5),t._v(" "),n("div",{staticClass:"media-right"},[n("span",{staticClass:"title is-1"},[t._v(t._s(t.reportData.rank))]),t._v(" "),n("span",[t._v("th")])])])])])]),t._v(" "),n("div",{staticClass:"column is-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("h4",[t._v(t._s(t.convertName(t.user))+"'s work time")])]),t._v(" "),n("div",{staticClass:"level-right"},[t._v(t._s(t.convertName(t.user))+"'s timezone: "+t._s(t.user.profile.time_zone))])]),t._v(" "),n("time-chart",{attrs:{data:t.time_works}})],1)])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-content"},[e("h4",[this._v("Focus")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-content"},[e("h4",[this._v("Accurate estimates")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-content"},[e("h4",[this._v("AVG focus")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-content"},[e("h4",[this._v("Total complete")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-content"},[e("h4",[this._v("Total Delays/Interruptions")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-content"},[e("h4",[this._v("Ranking")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-3 v-center is-text field"},[e("span",[this._v("Website")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-3 v-center is-text field"},[e("span",[this._v("Facebook")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-3 v-center is-text field"},[e("span",[this._v("Twitter")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-3 v-center is-text field"},[e("span",[this._v("LinkedIn")])])}],!1,null,"0e002d32",null);e.default=D.exports}}]);