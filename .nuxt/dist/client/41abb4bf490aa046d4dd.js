(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{495:function(t,e,r){var content=r(506);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(35).default)("2beac020",content,!0,{sourceMap:!1})},502:function(t,e,r){"use strict";r(13);var n=r(3),o=(r(23),r(24),r(7),r(43),r(50),r(29)),d=r(22),c={name:"TaskBoard",props:{tasks:{default:function(){return[]},type:Array},board:{default:null,type:Object},readonly:{default:!1,type:Boolean},tree:{default:!1,type:Boolean}},data:function(){return{activeTasks:[],disabledDrag:this.readonly,loading:!1,boardSlug:this.board?this.board.slug:null}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:this.disabledDrag,ghostClass:"ghost"}},taskOrder:function(){return this.board&&this.board.id?this.board.settings&&this.board.settings.task_order?this.board.settings.task_order:[]:this.$store.state.config.settings.task_order||[]},timerSetting:function(){return this.$store.state.config.settings.timer}},methods:{init_task:function(t){var e=this;this.activeTasks=[];var r=d.cloneDeep(t.filter((function(t){return!["stopped","complete"].includes(t.status)})));this.activeTasks=this.hierarchy(r,{idKey:"id",parentKey:"parent"}),this.activeTasks.forEach((function(t){t.order=t.id?e.taskOrder.indexOf(t.id):0})),this.activeTasks.sort((function(a,b){return a.order-b.order}))},handle_order:function(){var t=this,e=this.activeTasks.map((function(t){return t.id}));this.currentUser?this.board&&this.board.id?this.$axios.$put("/task/boards/".concat(this.boardSlug,"/"),{task_order:e}):this.$axios.$put("/auth/users/".concat(this.currentUser.username,"/"),{task_order:e}).then((function(){t.$store.commit("config/SET_SETTING_ORDER",e)})):localStorage.setItem("task_order",e.toString())},handle_add_child:function(t){this.$store.commit("task/ADD_TASK",t),null===this.currentUser&&this.$indexedDB.add(t)},handle_add:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new o.a({tomato:t.timerSetting.tomato,updating:!0,board:t.board?t.board.id:null}),e.next=3,t.$store.commit("task/ADD_TASK",r);case 3:if(null!==t.currentUser){e.next=6;break}return e.next=6,t.$indexedDB.add(r);case 6:t.handle_order();case 7:case"end":return e.stop()}}),e)})))()}},watch:{tasks:{deep:!0,handler:function(t,e){this.init_task(t),0===t.length&&(this.loading=!0,setTimeout(function(){this.loading=!1}.bind(this),800))}},readonly:function(){this.disabledDrag=this.readonly}},created:function(){this.init_task(this.tasks)}},l=r(4),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"board"},[t.readonly?t._e():r("div",{staticClass:"media"},[r("div",{staticClass:"media-content"},[r("div",{staticClass:"task has-text-centered",on:{click:t.handle_add}},[r("div",{staticClass:"notification"},[r("x-icon",{attrs:{name:"plus"}})],1)])]),t._v(" "),r("n-link",{staticClass:"media-right",attrs:{to:"/board/visual"}},[r("div",{staticClass:"task"},[r("div",{staticClass:"notification"},[r("x-icon",{attrs:{name:"file-tree-outline"}})],1)])])],1),t._v(" "),!t.loading&&t.activeTasks.length?r("draggable",t._b({on:{change:t.handle_order},model:{value:t.activeTasks,callback:function(e){t.activeTasks=e},expression:"activeTasks"}},"draggable",t.dragOptions,!1),t._l(t.activeTasks,(function(e,i){return r("task",{key:i,staticClass:"master",attrs:{value:e,readonly:t.readonly,tree:t.tree},on:{add:t.handle_add_child,editing:function(e){t.disabledDrag=e},deleted:function(e){return t.$emit("deleted",e)}}})})),1):t._e(),t._v(" "),t.loading?r("div",{staticClass:"tasks"},t._l(5,(function(i){return r("div",{key:i,staticClass:"task"},[t._m(0,!0)])})),0):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notification media"},[e("div",{staticClass:"skeleton-task"})])}],!1,null,"1914c646",null);e.a=component.exports},505:function(t,e,r){"use strict";var n=r(495);r.n(n).a},506:function(t,e,r){(e=r(34)(!1)).push([t.i,".board-detail{min-height:calc(100vh - 40px);display:flex;flex-direction:column}.board-detail .section:first-child .buttons{justify-content:center}.section{flex:0}.tree-task{padding:1rem 0;flex:1}.tree-task .task.master .task{position:relative}.tree-task .task{margin-bottom:.75rem}.tree-task .task .tasks:not(:empty){padding:0 .75rem .25rem}.tree-task .task .tasks:not(:empty) .task.is-active{margin:0 0 .75rem}.tree-task .task .card{position:unset;box-shadow:unset;border:0}.tree-task .task .card .card-content{padding:0}.tree-task .task .note{margin:0 0 1rem}.tree-task .task.is-active .label{margin-left:.75rem}.tree-task .task .notification{padding:.75rem}",""]),t.exports=e},519:function(t,e,r){"use strict";r.r(e);r(52),r(17),r(16),r(7),r(45),r(43),r(50),r(31);var n=r(6),o=(r(13),r(3)),d=r(69),c=r(107),l=r(32),h=(r(29),r(502));function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"TemplateDetail",components:{BDropdownItem:r(90).a,TaskBoard:h.a,BInput:l.a,BTaginput:c.a,Avatar:d.a},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,d,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.$axios,n=t.params,o={title:"Your Work",description:"Manage your task on a tree!"},d={},"visual"===n.id){e.next=8;break}return e.next=6,r.$get("/task/boards/".concat(n.id,"/"));case 6:o=e.sent,d.board=o.id;case 8:return e.next=10,r.$get("/task/tasks/",{params:d});case 10:return c=e.sent,e.abrupt("return",{flat_tasks:c,board:f({},o,{text_tags:o.hash_tags?o.hash_tags.map((function(t){return t.title})):[],settings:o.settings?o.settings:{}}),boardSlug:o.slug});case 12:case"end":return e.stop()}}),e)})))()},data:function(){return{updating:!1}},head:function(){return{title:this.board.title+" - Self Study - Tasks and Steps"}},computed:{storeTasks:function(){var t=this;return this.$store.state.task.tasks.filter((function(e){return t.board.id?e.board===t.board.id&&e.id:null===e.board}))},readonly:function(){if(this.currentUser){if(!this.board.id)return!this.updating;if(this.currentUser.id===this.board.user)return!this.updating;if(!this.board.settings.is_readonly)return!this.updating}return!0}},methods:{handleUpdate:function(){var t=this,data={};["title","description","slug","text_tags","is_interface","media","settings"].forEach((function(e){"media"===e&&t.board.media?data[e]=t.board.media.id:data[e]=t.board[e]})),this.currentUser&&this.currentUser.id===this.board.user&&this.$axios.$put("/task/boards/".concat(this.boardSlug,"/"),data).then((function(e){e.slug!==t.boardSlug&&(t.$router.replace({path:"/board/".concat(e.slug)}),t.boardSlug=e.slug)})).then((function(){t.updating=!1}))},handleDeleted:function(t){var e=this.flat_tasks.map((function(t){return t.id})).indexOf(t.id);this.flat_tasks.splice(e,1)},useBoard:function(){var t=this;this.$axios.$post("/task/boards/".concat(this.board.id,"/clone/")).then((function(e){t.$router.replace({path:"/board/".concat(e.slug)})})).catch((function(){}))},launchBoard:function(){}},watch:{storeTasks:{deep:!0,handler:function(){var t=this,e=this.flat_tasks.map((function(t){return t.id}));this.storeTasks.forEach((function(r){e.includes(r.id)||t.flat_tasks.unshift(r)}))}}},mounted:function(){this.toTop()}},k=(r(505),r(4)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"board-detail"},[r("div",{staticClass:"hero tree-task"},[r("div",{staticClass:"hero-body"},[r("div",{staticClass:"container"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-4"},[r("div",{staticClass:"media",staticStyle:{"margin-bottom":"1.5rem"}},[t.board.media||t.updating?r("div",{staticClass:"media-left"},[r("avatar",{attrs:{"can-update":t.updating},model:{value:t.board.media,callback:function(e){t.$set(t.board,"media",e)},expression:"board.media"}})],1):t._e(),t._v(" "),r("div",{staticClass:"media-content"},[r("ce",{staticClass:"title",attrs:{editable:t.updating,elm:"h1"},model:{value:t.board.title,callback:function(e){t.$set(t.board,"title",e)},expression:"board.title"}})],1)]),t._v(" "),t.updating||t.board.description?r("div",{staticClass:"notification is-light"},[r("ce",{attrs:{editable:t.updating,elm:"p",placeholder:"Description"},model:{value:t.board.description,callback:function(e){t.$set(t.board,"description",e)},expression:"board.description"}})],1):t._e(),t._v(" "),t.currentUser&&t.currentUser.id===t.board.user?r("div",{staticClass:"buttons board-control"},[!t.updating&&t.board.is_interface?r("div",{staticClass:"button is-primary",on:{click:t.useBoard}},[t._v("Use")]):t._e(),t._v(" "),t.updating||t.board.is_interface?t._e():r("div",{staticClass:"button is-primary",on:{click:t.launchBoard}},[t._v("Launch")]),t._v(" "),t.updating?r("div",{staticClass:"button",on:{click:t.handleUpdate}},[r("x-icon",{attrs:{name:"check"}})],1):t._e(),t._v(" "),r("div",{staticClass:"button is-text",on:{click:function(e){t.updating=!t.updating}}},[r("x-icon",{attrs:{name:t.updating?"close":"pen"}})],1)]):t._e(),t._v(" "),r("n-link",{staticClass:"button is-fullwidth is-light",staticStyle:{"margin-bottom":".5rem"},attrs:{to:"/board"}},[r("x-icon",{attrs:{name:"chevron-left"}}),t._v(" "),r("span",[t._v("Back")])],1)],1),t._v(" "),r("div",{staticClass:"column"},[t.updating?r("div",{staticClass:"level is-mobile"},[r("div",{staticClass:"level-left"},[null===t.board.parent?r("div",{staticClass:"field"},[r("b-switch",{attrs:{rounded:!1},model:{value:t.board.is_interface,callback:function(e){t.$set(t.board,"is_interface",e)},expression:"board.is_interface"}},[t._v("Template")])],1):t._e()]),t._v(" "),r("div",{staticClass:"level-right"},[r("b-dropdown",{attrs:{position:"is-bottom-left","trap-focus":!0}},[r("div",{staticClass:"navbar-item clickable",attrs:{slot:"trigger"},slot:"trigger"},[r("x-icon",{attrs:{name:"cogs"}}),t._v(" "),r("span",[t._v("Privacy")])],1),t._v(" "),r("b-dropdown-item",{staticStyle:{"min-width":"300px"},attrs:{custom:""}},[r("div",{staticClass:"level is-mobile"},[r("div",{staticClass:"level-left"},[t._v("Public")]),t._v(" "),r("div",{staticClass:"level-right"},[r("b-switch",{attrs:{rounded:!1},model:{value:t.board.settings.is_public,callback:function(e){t.$set(t.board.settings,"is_public",e)},expression:"board.settings.is_public"}})],1)]),t._v(" "),r("div",{staticClass:"level is-mobile"},[r("div",{staticClass:"level-left"},[t._v("Team")]),t._v(" "),r("div",{staticClass:"level-right"},[r("b-switch",{attrs:{rounded:!1},model:{value:t.board.settings.is_team,callback:function(e){t.$set(t.board.settings,"is_team",e)},expression:"board.settings.is_team"}})],1)]),t._v(" "),!t.board.settings.is_public&&t.board.settings.is_team?r("div",{staticClass:"field"},[r("b-input",{attrs:{expanded:"",placeholder:"Password"},model:{value:t.board.settings.password,callback:function(e){t.$set(t.board.settings,"password",e)},expression:"board.settings.password"}}),t._v(" "),r("p",{staticClass:"help"},[t._v("Use password to join!")])],1):t._e(),t._v(" "),r("div",{staticClass:"level is-mobile"},[r("div",{staticClass:"level-left"},[t._v("Readonly")]),t._v(" "),r("div",{staticClass:"level-right"},[r("b-switch",{attrs:{rounded:!1},model:{value:t.board.settings.is_readonly,callback:function(e){t.$set(t.board.settings,"is_readonly",e)},expression:"board.settings.is_readonly"}})],1)])])],1)],1)]):t._e(),t._v(" "),t.updating?r("div",{staticClass:"field"},[r("b-input",{attrs:{icon:"label",placeholder:"Board Slug"},model:{value:t.board.slug,callback:function(e){t.$set(t.board,"slug",e)},expression:"board.slug"}})],1):t._e(),t._v(" "),t.updating?r("div",{staticClass:"field"},[r("b-taginput",{attrs:{icon:"tag",placeholder:"Hash tag"},model:{value:t.board.text_tags,callback:function(e){t.$set(t.board,"text_tags",e)},expression:"board.text_tags"}})],1):t._e(),t._v(" "),r("task-board",{attrs:{tasks:t.flat_tasks,board:t.board,readonly:t.readonly,tree:""},on:{deleted:t.handleDeleted}})],1)])])])])])}),[],!1,null,null,null);e.default=component.exports}}]);